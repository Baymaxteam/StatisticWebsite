

$(function () {
    var count = 0;
    // Prepare demo data
    var data = [
        {
            "hc-key": "tw-cl",
            "value": 0
        },
        {
            "hc-key": "tw-tw",
            "value": 1
        },
        {
            "hc-key": "tw-tp",
            "value": 2
        },
        {
            "hc-key": "tw-ty",
            "value": 3
        },
        {
            "hc-key": "tw-hs",
            "value": 4
        },
        {
            "hc-key": "tw-hh",
            "value": 5
        },
        {
            "hc-key": "tw-ml",
            "value": 6
        },
        {
            "hc-key": "tw-th",
            "value": 7
        },
        {
            "hc-key": "tw-nt",
            "value": 8
        },
        {
            "hc-key": "tw-cg",
            "value": 9
        },
        {
            "hc-key": "tw-yl",
            "value": 10
        },
        {
            "hc-key": "tw-cs",
            "value": 11
        },
        {
            "hc-key": "tw-ch",
            "value": 12
        },
        {
            "hc-key": "tw-tn",
            "value": 13
        },
        {
            "hc-key": "tw-kh",
            "value": 14
        },
        {
            "hc-key": "tw-pt",
            "value": 15
        },
        {
            "hc-key": "tw-il",
            "value": 2
        },
        {
            "hc-key": "tw-hl",
            "value": 20
        },
        {
            "hc-key": "tw-tt",
            "value": 4
        },
        {
            "hc-key": "tw-km",
            "value": 6
        },
        {
            "hc-key": "tw-lk",
            "value": 7
        },
        {
            "hc-key": "tw-ph",
            "value": 5
        }
    ];

    // Initiate the chart
    $('#container').highcharts('Map', {

        title : {
            text : '26縣市流感併發重症'
        },
        mapNavigation: {
            enabled: true,
            buttonOptions: {
                verticalAlign: 'bottom'
            }
        },

        colorAxis: {
            min: 0
        },

        series : [{
            data : data,
            mapData: Highcharts.maps['countries/tw/tw-all'],
            joinBy: 'hc-key',
            name: '重症人數',
            states: {
                hover: {
                    color: '#BADA55'
                }
            },
            dataLabels: {
                enabled: true,
                format: '{point.name}'
            }
        }]


    },
     function (chart) {

        var data_1 =
        [
          [0,0,2,1,0,0,0,0,0,0,0,0,0,1,0,0,2,1,0,0,0,0],
          [0,0,2,1,0,0,0,0,0,0,0,0,0,1,0,0,2,1,0,0,0,0],
          [0,1,1,0,0,0,0,2,0,0,0,0,0,2,1,0,0,0,0,0,0,0],
          [0,0,2,0,0,0,0,0,0,2,0,0,0,5,1,0,0,0,0,0,0,0],
          [0,0,2,2,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0],
          [0,1,1,0,0,0,0,0,0,1,0,0,0,2,0,0,0,0,0,0,0,0],
          [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0],
          [0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
          [0,0,1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0],
          [0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0],
          [0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0],
          [0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0],
          [1,12,19,8,0,0,1,2,1,4,2,0,0,1,2,1,0,2,1,0,0,0],
          [0,13,27,9,1,1,2,9,1,2,3,0,2,4,14,4,0,3,4,1,0,0],
          [3,23,54,18,4,4,5,17,1,5,2,0,2,7,24,4,1,3,3,0,0,2],
          [3,17,58,34,2,5,3,9,0,7,4,2,2,5,31,3,0,7,4,1,0,2],
          [2,11,49,19,3,5,3,9,1,8,2,1,2,14,26,3,2,10,1,1,1,3],
          [3,9,32,10,1,1,3,8,1,3,8,1,2,2,29,5,2,11,5,0,0,0],
          [1,5,13,7,2,2,1,4,1,1,1,1,1,7,15,1,0,8,2,0,0,2],
          [0,4,17,3,0,1,0,2,0,2,5,0,2,5,7,1,0,4,1,0,0,0],
          [0,4,4,0,0,0,0,4,0,0,3,0,1,2,0,0,0,0,2,0,0,0],
          [0,1,2,2,0,0,0,0,0,1,1,0,0,2,0,0,0,0,1,0,0,0],
          [0,1,2,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,0,0,1],
          [0,3,0,1,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0],
          [1,17,50,11,1,3,3,10,2,3,2,0,5,21,18,7,3,3,6,0,0,0],
          [1,15,27,11,1,4,2,8,3,2,6,1,5,15,12,4,0,5,4,0,0,0],
          [1,7,33,8,1,2,2,3,6,9,2,0,2,19,13,4,2,2,3,1,0,0],
          [0,16,19,3,1,1,3,6,5,8,3,0,3,8,16,3,2,2,4,0,0,0],
          [0,11,24,11,2,3,0,7,5,6,3,1,6,10,12,6,4,3,3,0,0,0],
          [0,6,14,4,0,1,0,3,3,1,6,0,0,6,9,3,0,2,2,0,0,0],
          [0,7,17,4,1,0,1,4,2,5,0,0,0,6,8,1,0,1,0,0,0,0],
          [0,6,10,2,1,0,1,2,1,5,1,0,1,7,2,1,0,3,2,0,0,0],
          [0,4,16,7,1,3,1,0,0,2,1,1,0,3,9,1,1,0,1,0,0,1],
          [2,1,8,1,0,1,2,2,0,3,1,1,1,4,3,0,0,0,0,0,0,0],
          [0,2,11,1,0,0,0,2,1,2,1,0,0,5,2,1,0,0,3,0,0,1],
          [0,1,4,0,0,1,0,2,1,0,0,0,2,6,2,4,1,0,1,0,0,1],
          [0,3,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
          [0,1,2,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0],
          [0,1,3,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0],
          [0,7,5,2,0,0,0,1,0,0,0,0,0,1,1,0,0,1,0,0,0,0],
          [0,3,1,0,0,0,0,0,2,2,1,0,0,1,0,0,0,0,0,0,0,0],
          [0,2,6,1,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0],
          [0,5,3,0,0,0,0,1,1,2,0,1,0,1,1,0,0,1,0,0,0,0],
          [0,6,14,1,0,0,0,0,0,2,1,0,0,3,3,0,0,0,1,0,0,0],
          [0,1,7,0,0,0,1,0,0,3,1,0,2,1,1,0,0,0,0,0,0,0],
          [0,2,4,2,0,1,1,0,1,1,0,0,2,2,4,1,2,0,1,0,0,0],
          [0,4,9,5,0,0,0,0,2,3,1,0,2,0,3,0,0,0,0,0,0,0],
          [0,2,8,1,1,2,0,0,0,1,1,0,0,0,3,0,0,1,1,0,0,0],
          [1,11,16,3,0,2,0,2,3,3,0,0,0,4,5,1,0,0,1,1,0,0],
          [2,17,25,10,0,1,0,1,6,2,0,0,0,10,8,4,1,2,0,0,0,0],
          [0,18,23,6,0,4,1,3,3,4,2,0,0,8,12,1,3,2,1,1,0,0],
          [0,23,42,8,3,1,2,3,1,1,4,1,1,2,8,1,1,3,1,1,0,0],
          [0,21,34,8,0,2,0,3,7,7,4,2,3,12,12,3,1,3,2,0,0,0],
          [2,16,48,7,0,4,2,7,3,6,4,1,0,13,25,4,0,2,0,0,0,0],
          [0,16,36,11,0,1,3,6,2,8,1,0,0,5,13,6,1,2,4,0,0,0],
          [1,21,32,14,1,0,3,4,2,10,2,2,0,7,14,4,1,1,1,0,0,1],
          [0,28,42,17,1,3,1,3,2,6,5,3,0,2,7,6,2,2,3,0,0,0],
          [1,11,23,8,1,2,4,8,1,4,4,0,4,7,9,2,0,2,2,1,0,0],
          [1,11,34,8,0,0,3,3,2,2,0,0,1,3,13,1,1,2,5,0,0,0],
          [0,7,12,1,1,1,1,3,1,3,6,0,0,5,5,3,0,2,2,0,0,0],
          [0,3,2,1,0,0,0,0,2,0,0,0,0,1,0,0,0,0,0,0,0,0],
          [0,0,1,2,0,0,0,1,1,1,1,0,0,1,0,0,0,0,0,0,0,0],
          [0,1,4,0,0,0,0,0,0,2,0,0,0,1,0,0,1,0,1,0,0,0],
          [0,2,4,1,0,0,0,1,0,0,1,0,0,2,1,1,1,0,0,0,0,0],
          [0,4,5,0,0,0,0,0,0,6,0,0,0,2,1,1,1,0,1,0,0,0],
          [1,3,3,0,0,0,1,3,0,2,2,0,0,1,4,1,0,2,1,0,0,0],
          [1,1,9,1,0,0,0,0,0,2,1,0,1,1,3,0,0,1,0,0,0,0],
          [0,4,4,0,0,0,0,0,0,1,0,0,1,3,2,1,0,0,1,0,0,0],
          [0,2,7,0,0,0,0,1,0,7,1,0,0,2,6,1,1,0,0,0,0,0],
          [0,3,2,0,0,1,0,2,1,2,0,0,0,4,2,0,0,0,1,0,0,0],
          [0,3,6,5,1,1,2,0,2,3,0,0,2,1,5,2,0,0,2,0,0,0],
          [0,5,8,4,0,0,1,2,1,5,1,1,0,4,3,2,0,1,0,0,0,0],
          [0,2,7,1,1,1,0,2,2,1,1,0,1,8,1,2,0,0,0,0,0,0],
          [1,4,5,5,0,1,3,4,1,1,1,0,0,4,1,0,2,0,0,0,0,0],
          [2,11,9,5,1,1,2,9,1,6,0,0,1,6,8,0,2,1,1,0,0,0],
          [1,8,17,9,2,1,2,11,3,2,2,0,1,7,8,0,3,1,0,0,0,0],
          [1,15,30,17,0,3,6,10,2,10,9,0,3,18,13,5,4,0,6,0,0,0],
          [3,18,29,14,2,5,5,25,7,10,8,2,5,26,27,10,5,2,3,0,0,0],
          [4,24,44,24,2,4,11,23,7,23,10,3,12,33,38,18,5,5,3,1,0,0],
          [5,21,37,17,3,7,7,35,10,16,14,6,10,39,31,25,4,4,1,0,0,0],
          [2,15,34,18,4,3,4,26,7,19,4,3,10,33,25,10,6,3,1,0,0,3],
          [1,10,11,3,4,3,8,9,3,3,3,1,6,18,22,15,5,0,3,0,0,0],
          [0,6,12,3,0,1,2,8,5,3,4,1,2,10,10,4,2,2,1,0,0,1],
          [1,5,3,2,2,0,0,5,1,3,0,0,0,5,5,9,2,0,0,0,0,0]
];

        if (!chart.renderer.forExport) {
            setInterval(function () {
                var point = chart.series[0].points[0],
                    newVal = 0;
                for(loop = 0; loop< 22; loop++)
                {
                    point = chart.series[0].points[loop];
                    newVal = data_1[count][loop];

                    point.update(newVal);
                }


                if (count ==84)
                    count = 0;
                else
                    count ++;
            }, 3000);
        }
    }
    );
});
